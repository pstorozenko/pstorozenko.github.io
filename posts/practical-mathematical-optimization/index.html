<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Practical Mathematical Optimization üè°üõíüßÉ | Pasza&#39;s blog</title>
<meta name="keywords" content="math, optimization, julia">
<meta name="description" content="In the previous post I&rsquo;ve presented the basics of stating mathematical optimization problems and JuMP framework in julia.
Today let&rsquo;s follow up with concrete examples!
Please checkout the accompanying jupyter notebook even though you might not feel like a programmer.
It&rsquo;s very clear and shows how easy it is to obtain solutions!">
<meta name="author" content="">
<link rel="canonical" href="/posts/practical-mathematical-optimization/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="/posts/practical-mathematical-optimization/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

>
<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PR8Z9SJC7F"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-PR8Z9SJC7F');
        }
      </script><meta property="og:url" content="/posts/practical-mathematical-optimization/">
  <meta property="og:site_name" content="Pasza&#39;s blog">
  <meta property="og:title" content="Practical Mathematical Optimization üè°üõíüßÉ">
  <meta property="og:description" content="In the previous post I‚Äôve presented the basics of stating mathematical optimization problems and JuMP framework in julia. Today let‚Äôs follow up with concrete examples! Please checkout the accompanying jupyter notebook even though you might not feel like a programmer. It‚Äôs very clear and shows how easy it is to obtain solutions!">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-11-21T14:18:35+01:00">
    <meta property="article:modified_time" content="2021-11-21T14:18:35+01:00">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Optimization">
    <meta property="article:tag" content="Julia">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Practical Mathematical Optimization üè°üõíüßÉ">
<meta name="twitter:description" content="In the previous post I&rsquo;ve presented the basics of stating mathematical optimization problems and JuMP framework in julia.
Today let&rsquo;s follow up with concrete examples!
Please checkout the accompanying jupyter notebook even though you might not feel like a programmer.
It&rsquo;s very clear and shows how easy it is to obtain solutions!">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/posts/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Practical Mathematical Optimization üè°üõíüßÉ",
      "item": "/posts/practical-mathematical-optimization/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Practical Mathematical Optimization üè°üõíüßÉ",
  "name": "Practical Mathematical Optimization üè°üõíüßÉ",
  "description": "In the previous post I\u0026rsquo;ve presented the basics of stating mathematical optimization problems and JuMP framework in julia. Today let\u0026rsquo;s follow up with concrete examples! Please checkout the accompanying jupyter notebook even though you might not feel like a programmer. It\u0026rsquo;s very clear and shows how easy it is to obtain solutions!\n",
  "keywords": [
    "math", "optimization", "julia"
  ],
  "articleBody": "In the previous post I‚Äôve presented the basics of stating mathematical optimization problems and JuMP framework in julia. Today let‚Äôs follow up with concrete examples! Please checkout the accompanying jupyter notebook even though you might not feel like a programmer. It‚Äôs very clear and shows how easy it is to obtain solutions!\nFinding maximum garden area üè° This one is the easiest. Imagine that you have to put a fence around your garden. You have 100m of fence. One side of your land is near rocks so you don‚Äôt have to waste fence on it. Your task is to find a way of putting the fence so it maximizes the are inside.\nProblem can be easily translated into mathematical optimization problem:\n$$ \\begin{aligned} \\max\\quad \u0026 x y \\newline \\text{Subject to} \\quad \u0026 x + 2y = 100.0 \\newline \\end{aligned} $$\nSolution:\njulia\u003e value(x), value(y), objective_value(model) (50.0, 25.0, 1250.0) So $x = 50$, $y=25$ and the garden area equals $1250$. The result looked strange for me at first glance. It‚Äôs an obvious fact that square is the rectangular of maximum area from all rectangles with certain perimeter. Here however, one side is already covered by rocks so problem is a bit different and the optimal fence has shape of rectangular with sides 25 and 50. heh‚Ä¶\nSize of square fitted in quadratic Our next problem is finding the maximum area of the square that can fit inside parabola under some threshold $y_{max} = 10$. When you look first on this problem it seems complicated and not trivial. Let‚Äôs do a nice visualization first.\nOur task is to maximize the green square area. To do so, our first observation should be that problem is symmetric with respect to line $x=0$. We can denote side of the square as $2a$. Instead of maximizing $(2a)^2$ we can just maximize $a$, this trick sometimes help solvers. It‚Äôs also pretty reasonable to say that top of our square will be aligned with line $y = y_{max}$. The bottom-right corner of square will have coordinates $(a, y_{max} - 2a)$. When square will be growing, it will grow until it hits a parabola so until it‚Äôs above $a^2$.\n$$ \\begin{aligned} \\max\\quad \u0026 a \\newline \\text{Subject to} \\quad \u0026 10 - 2 a \\geq a^2 \\newline \\end{aligned} $$\njulia\u003e value(a), objective_value(model) (2.316624802924551, 2.316624802924551) julia\u003e (2value(a))^2 21.467001910100855 You might realise that this whole optimization was not necessary as the biggest square will have simply $10 - 2 a = a^2 $ and we can solve it for $a$. I highly encourage you to write it on paper and solve.\nSize of rectangle fitted in quadratic The above problem looked complicated at first but in the end we‚Äôve discovered it can be easily solved via quadratic equation. Not let‚Äôs consider rectangle instead of a square. Suddenly the problems is (I think) out of bounds for high-school math and requires the basics of calculus to solve it by hand. Fortunately with our framework the problem is not that hard to write in JuMP. Let‚Äôs consider a rectangle of size $2a \\times 2b$. We will be maximizing the area $(2a)\\cdot (2b)$ with constraint $10 - 2 b \\geq a^2$. This constraint will not be enough, we also have to make $a$ positive.\n$$ \\begin{aligned} \\max\\quad \u0026 (2a)\\cdot(2b) \\newline \\text{Subject to} \\quad \u0026 10 - 2 b \\geq a^2 \\newline \u0026 a \\geq 0 \\end{aligned} $$\njulia\u003e value(a), value(b), objective_value(model) (1.8257418674792618, 3.333333366323534, 24.343225140649853) As with the previous problem, I highly encourage you to write this problem on paper and try to find the optimal $a$ and $b$ by hand, maybe with help of WolframAlpha.\nMaximizing sales in a shop üõí John sells shirts. Right now he sells 16 shirts a day, ¬£20 each. He observes that by decreasing price by ¬£2 he is able to sell one shirt more. What is the optimal price of the shirt for John and what would be his profit then? Each shirt costs ¬£5 to produce. It‚Äôs a typical Matura Exam question.\nLet‚Äôs denote $n$ as number of shirts sold and $p$ as a single shirt price. For sure we know that our objective function is $n (p - 5)$ as we want to maximize John‚Äôs profit. Now we have to add some constraints.\nThe problem is tricky to write using only those two variables. Fortunately we can introduce new if we need! New variable $s$ will denote how many more shirts are sold. Now amount of sold shirts will be $n = 16 + s$ for price $p = 20 - 2s$.\nIf we had to do it on paper, we could eliminate $s$, find variable $n$ from constraints, and substitute it into objective function. We‚Äôre left with a simple quadratic depended only on $p$. That‚Äôs how we would solve it in high-school. With mathematical optimization framework we don‚Äôt have to this!\n$$ \\begin{aligned} \\max\\quad \u0026 n (p - 5) \\newline \\text{Subject to} \\quad \u0026 n = 16 + s \\newline \u0026 p = 20 - 2s \\newline \\end{aligned} $$\njulia\u003e value.([n, p, s]), objective_value(model) ([11.75, 28.5, -4.249999999999999], 276.125) Here results require some interpretation as John might have trouble selling 11.75 shirts for total ¬£276.125. The closest feasible solution is with $s = -4$, $n = 12$, $p=28$ with objective function ¬£276. For John, surprisingly, he should raise the price to earn more.\nOptimizing juice factory üßÉ The last example for today is the most exciting and involves numerous interesting tricks! Suppose that you are the Production Engineer at The Tasty Juice. You have 500kg apples and 300kg pears. You can create apple-pear juice by using 2kg of apples and 1kg pear. Current market prices are:\n5‚Ç¨ for one kilogram of apples 7‚Ç¨ for one kilogram of pears 20‚Ç¨ for a liter of juice How to maximize your profit?\nIt‚Äôs easy to write out our objective function, it‚Äôs just $5a + 7p + 20j$. Now we have to find some constraints. For sure we have to we can sell between 0 and 500kg of apples and between 0 and 300kg of pears.\nBut how to use some fruits for juice and sell the rest? We can introduce new variables! Apples used for juice $a_j$ and the same with pears $p_j$. Now constraints are $a + a_j \\le 500$ and $p + p_j \\le 300$.\nIt‚Äôs important to not write $0 \\le a + a_j \\le 500$, as it doesn‚Äôt restrict $a$ and $a_j$ to be positive, $a_j$ may be $5000$ and $a = -4990$ and still satisfy constraint.\nSo how to use fruits? We can force $p_j$ to be equal to $j$ and $2a_j = j$. The reasoning behind the second equation is that the number apples kilograms used should be twice as large as produced liters of juice.\nCollecting everything, we can write: $$ \\begin{aligned} \\max\\quad \u0026 5 a + 7 p + 20 j \\newline \\text{Subject to} \\quad \u0026 2a_j - j = 0 \\newline \u0026 p_j - j = 0 \\newline \u0026 a \\geq 0 \\newline \u0026 a_j \\geq 0 \\newline \u0026 a + a_j \\leq 500 \\newline \u0026 p \\geq 0 \\newline \u0026 p_j \\geq 0 \\newline \u0026 p + p_j \\leq 300 \\newline \\end{aligned} $$\nOur solver solution is:\njulia\u003e round.(value.([a, aj, p, pj, j])), round(objective_value(model)) ([-0.0, 500.0, 50.0, 250.0, 250.0], 5350.0) This means that we should use all 500kg of apples and 250kg of pears to produce 250 liters of juice. We will sell it together with reminding 50kg of pears for 5350‚Ç¨ in total.\nThe summary of mathematical optimization In this post I tried to show some simple problems solved by JuMP. If you have some ideas for modifications, download the notebook and play with it! Stay tuned for the next post, it will finally explain the math behind circles in circle!\n",
  "wordCount" : "1292",
  "inLanguage": "en",
  "datePublished": "2021-11-21T14:18:35+01:00",
  "dateModified": "2021-11-21T14:18:35+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/posts/practical-mathematical-optimization/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pasza's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Pasza&#39;s blog (Alt + H)">Pasza&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/about" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="/useful-materials" title="Useful materials">
                    <span>Useful materials</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Practical Mathematical Optimization üè°üõíüßÉ
    </h1>
    <div class="post-meta"><span title='2021-11-21 14:18:35 +0100 +0100'>November 21, 2021</span>

</div>
  </header> 
  <div class="post-content"><p>In <a href="/posts/mathematical-optimization/">the previous post</a> I&rsquo;ve presented the basics of stating mathematical optimization problems and JuMP framework in julia.
Today let&rsquo;s follow up with concrete examples!
Please checkout <a href="https://github.com/pstorozenko/pstorozenko.github.io/blob/main/code/practical-mathematical-optimization/main.ipynb">the accompanying jupyter notebook</a> even though you might not feel like a programmer.
It&rsquo;s very clear and shows how easy it is to obtain solutions!</p>
<h3 id="finding-maximum-garden-area-">Finding maximum garden area üè°<a hidden class="anchor" aria-hidden="true" href="#finding-maximum-garden-area-">#</a></h3>
<p>This one is the easiest.
Imagine that you have to put a fence around your garden.
You have 100m of fence.
One side of your land is near rocks so you don&rsquo;t have to waste fence on it.
Your task is to find a way of putting the fence so it maximizes the are inside.</p>
<p><img alt="Example garden with rocks" loading="lazy" src="/posts/practical-mathematical-optimization/example_garden.png"></p>
<p>Problem can be easily translated into mathematical optimization problem:</p>
<p>$$
\begin{aligned}
\max\quad &amp; x y \newline
\text{Subject to} \quad &amp; x + 2y = 100.0 \newline
\end{aligned}
$$</p>
<p>Solution:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> value(x), value(y), objective_value(model)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">50.0</span>, <span style="color:#ae81ff">25.0</span>, <span style="color:#ae81ff">1250.0</span>)
</span></span></code></pre></div><p>So $x = 50$, $y=25$ and the garden area equals $1250$.
The result looked strange for me at first glance.
<em>It&rsquo;s an obvious fact</em> that square is the rectangular of maximum area from all rectangles with certain perimeter.
Here however, one side is already covered by rocks so problem is a bit different and the optimal fence has shape of rectangular with sides 25 and 50. heh&hellip;</p>
<p><img alt="Optimal garden with rocks" loading="lazy" src="/posts/practical-mathematical-optimization/optimal_garden.png"></p>
<h3 id="size-of-square-fitted-in-quadratic">Size of square fitted in quadratic<a hidden class="anchor" aria-hidden="true" href="#size-of-square-fitted-in-quadratic">#</a></h3>
<p>Our next problem is finding the maximum area of the square that can fit inside parabola under some threshold $y_{max} = 10$.
When you look first on this problem it seems complicated and not trivial.
Let&rsquo;s do a nice visualization first.</p>
<p><img alt="Example plot with quadratic and square" loading="lazy" src="/posts/practical-mathematical-optimization/quadratic.png"></p>
<p>Our task is to maximize the green square area.
To do so, our first observation should be that problem is symmetric with respect to line $x=0$.
We can denote side of the square as $2a$.
Instead of maximizing $(2a)^2$ we can just maximize $a$, this trick sometimes help solvers.
It&rsquo;s also pretty reasonable to say that top of our square will be aligned with line $y = y_{max}$.
The bottom-right corner of square will have coordinates $(a, y_{max} - 2a)$.
When square will be growing, it will grow until it hits a parabola so until it&rsquo;s above $a^2$.</p>
<p>$$ \begin{aligned}
\max\quad &amp; a \newline
\text{Subject to} \quad &amp;  10 - 2 a \geq a^2 \newline
\end{aligned} $$</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> value(a), objective_value(model)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">2.316624802924551</span>, <span style="color:#ae81ff">2.316624802924551</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> (<span style="color:#ae81ff">2</span>value(a))<span style="color:#f92672">^</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">21.467001910100855</span>
</span></span></code></pre></div><p><img alt="The optimal square plotted" loading="lazy" src="/posts/practical-mathematical-optimization/optimal_square.png"></p>
<p>You might realise that this whole optimization was not necessary as the biggest square will have simply $10 - 2 a = a^2 $ and we can solve it for $a$.
I highly encourage you to write it on paper and solve.</p>
<h3 id="size-of-rectangle-fitted-in-quadratic">Size of rectangle fitted in quadratic<a hidden class="anchor" aria-hidden="true" href="#size-of-rectangle-fitted-in-quadratic">#</a></h3>
<p>The above problem looked complicated at first but in the end we&rsquo;ve discovered it can be easily solved via quadratic equation.
Not let&rsquo;s consider <strong>rectangle</strong> instead of a square.
Suddenly the problems is (I think) out of bounds for high-school math and requires the basics of calculus to solve it by hand.
Fortunately with our framework the problem is not that hard to write in JuMP.
Let&rsquo;s consider a rectangle of size $2a \times 2b$.
We will be maximizing the area $(2a)\cdot (2b)$ with constraint $10 - 2 b \geq a^2$.
This constraint will not be enough, we also have to make $a$ positive.</p>
<p>$$ \begin{aligned}
\max\quad &amp; (2a)\cdot(2b) \newline
\text{Subject to} \quad &amp;  10 - 2 b \geq a^2 \newline
&amp; a \geq 0
\end{aligned} $$</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> value(a), value(b), objective_value(model)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">1.8257418674792618</span>, <span style="color:#ae81ff">3.333333366323534</span>, <span style="color:#ae81ff">24.343225140649853</span>)
</span></span></code></pre></div><p><img alt="The optimal rectangle plotted" loading="lazy" src="/posts/practical-mathematical-optimization/optimal_rectangle.png"></p>
<p>As with the previous problem, I highly encourage you to write this problem on paper and try to find the optimal $a$ and $b$ by hand, maybe with help of <a href="https://www.wolframalpha.com/">WolframAlpha</a>.</p>
<h3 id="maximizing-sales-in-a-shop-">Maximizing sales in a shop üõí<a hidden class="anchor" aria-hidden="true" href="#maximizing-sales-in-a-shop-">#</a></h3>
<p>John sells shirts.
Right now he sells 16 shirts a day, ¬£20 each.
He observes that by decreasing price by ¬£2 he is able to sell one shirt more.
What is the optimal price of the shirt for John and what would be his profit then?
Each shirt costs ¬£5 to produce.
It&rsquo;s a typical Matura Exam question.</p>
<p>Let&rsquo;s denote $n$ as number of shirts sold and $p$ as a single shirt price.
For sure we know that our objective function is $n (p - 5)$ as we want to maximize John&rsquo;s profit. Now we have to add some constraints.</p>
<p>The problem is tricky to write using only those two variables.
Fortunately we can introduce new if we need!
New variable $s$ will denote how many more shirts are sold.
Now amount of sold shirts will be $n = 16 + s$ for price $p = 20 - 2s$.</p>
<p>If we had to do it on paper, we could eliminate $s$, find variable $n$ from constraints, and substitute it into objective function. We&rsquo;re left with a simple quadratic depended only on $p$.
That&rsquo;s how we would solve it in high-school.
With mathematical optimization framework we don&rsquo;t have to this!</p>
<p>$$
\begin{aligned}
\max\quad &amp; n (p - 5) \newline
\text{Subject to} \quad &amp; n = 16 + s \newline
&amp; p = 20 - 2s \newline
\end{aligned}
$$</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> value<span style="color:#f92672">.</span>([n, p, s]), objective_value(model)
</span></span><span style="display:flex;"><span>([<span style="color:#ae81ff">11.75</span>, <span style="color:#ae81ff">28.5</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">4.249999999999999</span>], <span style="color:#ae81ff">276.125</span>)
</span></span></code></pre></div><p>Here results require some interpretation as John might have trouble selling 11.75 shirts for total ¬£276.125.
The closest feasible solution is with $s = -4$, $n = 12$, $p=28$ with objective function ¬£276.
For John, surprisingly, he should raise the price to earn more.</p>
<h3 id="optimizing-juice-factory-">Optimizing juice factory üßÉ<a hidden class="anchor" aria-hidden="true" href="#optimizing-juice-factory-">#</a></h3>
<p>The last example for today is the most exciting and involves numerous interesting tricks!
Suppose that you are the Production Engineer at The Tasty Juice.
You have 500kg apples and 300kg pears.
You can create apple-pear juice by using 2kg of apples and 1kg pear.
Current market prices are:</p>
<ul>
<li>5‚Ç¨ for one kilogram of apples</li>
<li>7‚Ç¨ for one kilogram of pears</li>
<li>20‚Ç¨ for a liter of juice</li>
</ul>
<p>How to maximize your profit?</p>
<p>It&rsquo;s easy to write out our objective function, it&rsquo;s just $5a + 7p + 20j$.
Now we have to find some constraints.
For sure we have to we can sell between 0 and 500kg of apples and between 0 and 300kg of pears.</p>
<p>But how to <em>use</em> some fruits for juice and sell the rest?
We can introduce new variables!
Apples used for juice $a_j$ and the same with pears $p_j$.
Now constraints are $a + a_j \le 500$ and $p + p_j \le 300$.</p>
<p>It&rsquo;s important to not write $0 \le a + a_j \le 500$, as it doesn&rsquo;t restrict $a$ and $a_j$ to be positive, $a_j$ may be $5000$ and $a = -4990$ and still satisfy constraint.</p>
<p>So how to <em>use</em> fruits?
We can force $p_j$ to be equal to $j$ and $2a_j = j$.
The reasoning behind the second equation is that the number apples kilograms used should be twice as large as produced liters of juice.</p>
<p>Collecting everything, we can write:
$$ \begin{aligned}
\max\quad &amp; 5 a + 7 p + 20 j \newline
\text{Subject to} \quad &amp; 2a_j - j = 0 \newline
&amp; p_j - j = 0 \newline
&amp; a \geq 0 \newline
&amp; a_j \geq 0 \newline
&amp; a + a_j \leq 500 \newline
&amp; p \geq 0 \newline
&amp; p_j \geq 0 \newline
&amp; p + p_j \leq 300 \newline
\end{aligned} $$</p>
<p>Our solver solution is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> round<span style="color:#f92672">.</span>(value<span style="color:#f92672">.</span>([a, aj, p, pj, j])), round(objective_value(model))
</span></span><span style="display:flex;"><span>([<span style="color:#f92672">-</span><span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">500.0</span>, <span style="color:#ae81ff">50.0</span>, <span style="color:#ae81ff">250.0</span>, <span style="color:#ae81ff">250.0</span>], <span style="color:#ae81ff">5350.0</span>)
</span></span></code></pre></div><p>This means that we should use all 500kg of apples and 250kg of pears to produce 250 liters of juice. We will sell it together with reminding 50kg of pears for 5350‚Ç¨ in total.</p>
<h2 id="the-summary-of-mathematical-optimization">The summary of mathematical optimization<a hidden class="anchor" aria-hidden="true" href="#the-summary-of-mathematical-optimization">#</a></h2>
<p>In this post I tried to show some simple problems solved by JuMP.
If you have some ideas for modifications, download the notebook and play with it!
Stay tuned for the next post, it will finally explain the math behind circles in circle!</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/math/">Math</a></li>
      <li><a href="/tags/optimization/">Optimization</a></li>
      <li><a href="/tags/julia/">Julia</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>Piotr Pasza Storo≈ºenko</span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
