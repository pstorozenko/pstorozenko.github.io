<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>OxML Report Day2 📜 | Pasza&#39;s blog</title>
<meta name="keywords" content="conference, OxML, Oxford, machine-learning, appsilon">
<meta name="description" content="The report of all talks during the second day of OxML Health 2023 where I&rsquo;ve been on behalf of Appsilon..
This day talks were on:

The State of Computer Vision and Many CV Experiments - Cristian Rupprecht
ML Challenges in Oncology and Multi-omics data - Mireira Crispin
What is a Multimodality and How To Work With It? - Louis-Philippe (LP) Morency
">
<meta name="author" content="">
<link rel="canonical" href="/posts/oxml-report-day2/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="/posts/oxml-report-day2/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

>
<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PR8Z9SJC7F"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-PR8Z9SJC7F');
        }
      </script><meta property="og:url" content="/posts/oxml-report-day2/">
  <meta property="og:site_name" content="Pasza&#39;s blog">
  <meta property="og:title" content="OxML Report Day2 📜">
  <meta property="og:description" content="The report of all talks during the second day of OxML Health 2023 where I’ve been on behalf of Appsilon..
This day talks were on:
The State of Computer Vision and Many CV Experiments - Cristian Rupprecht ML Challenges in Oncology and Multi-omics data - Mireira Crispin What is a Multimodality and How To Work With It? - Louis-Philippe (LP) Morency ">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-07-22T23:00:00+01:00">
    <meta property="article:modified_time" content="2023-07-22T23:00:00+01:00">
    <meta property="article:tag" content="Conference">
    <meta property="article:tag" content="OxML">
    <meta property="article:tag" content="Oxford">
    <meta property="article:tag" content="Machine-Learning">
    <meta property="article:tag" content="Appsilon">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OxML Report Day2 📜">
<meta name="twitter:description" content="The report of all talks during the second day of OxML Health 2023 where I&rsquo;ve been on behalf of Appsilon..
This day talks were on:

The State of Computer Vision and Many CV Experiments - Cristian Rupprecht
ML Challenges in Oncology and Multi-omics data - Mireira Crispin
What is a Multimodality and How To Work With It? - Louis-Philippe (LP) Morency
">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/posts/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "OxML Report Day2 📜",
      "item": "/posts/oxml-report-day2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "OxML Report Day2 📜",
  "name": "OxML Report Day2 📜",
  "description": "The report of all talks during the second day of OxML Health 2023 where I\u0026rsquo;ve been on behalf of Appsilon..\nThis day talks were on:\nThe State of Computer Vision and Many CV Experiments - Cristian Rupprecht ML Challenges in Oncology and Multi-omics data - Mireira Crispin What is a Multimodality and How To Work With It? - Louis-Philippe (LP) Morency ",
  "keywords": [
    "conference", "OxML", "Oxford", "machine-learning", "appsilon"
  ],
  "articleBody": "The report of all talks during the second day of OxML Health 2023 where I’ve been on behalf of Appsilon..\nThis day talks were on:\nThe State of Computer Vision and Many CV Experiments - Cristian Rupprecht ML Challenges in Oncology and Multi-omics data - Mireira Crispin What is a Multimodality and How To Work With It? - Louis-Philippe (LP) Morency I understand it might be out-of-context for people not attending OxML. If you’re interested in something in particular, reach out to me on LinkedIn.\nThe State of Computer Vision and Many CV Experiments - Christian Rupprecht Christian Rupprecht, a Departmental Lecturer in Computer Vision at VGG in Oxford, shared an informative talk on the history and current state of computer vision, and shared numerous experimental observations.\nHe started with a concise overview of the history of computer vision. I didn’t know that the Rosenblatt perceptron has been implemented with physical hardware of that size. He showcased that the idea of image decomposition into components like reflectance, specularity, shape, and object motion dates back to 1978, highlighting that it’s not a new concept. An interesting anecdote shared was how the iconic slow-motion scenes in the Matrix movie were created using a series of cameras capturing video sequentially. Christian engaged in an in-depth discussion on training signals for unsupervised, semi-supervised, and weakly-supervised learning. He explained that a signal is something one can optimize for, with one straightforward example being the reconstruction of the input. He also detailed another approach that involves having two inputs that are opposite with respect to each other. The aim is to train the model to make representations similar for similar inputs and distinct for different ones. He emphasized that one could work on both the latent representation and the reconstruction, applying losses at different stages. The lecture provided a comprehensive insight into unsupervised learning, which when considered along with Ali’s lecture from the previous day, offers a deeper understanding. Christian emphasized a theme where a model is initially trained in an unsupervised manner, then fine-tuned for the specific task. He presented a captivating approach involving ImageNet where they Identified similar images in an unsupervised manner. Labeled images according to the clustering from the first step and ran regular classification training. Repeated the clustering process. This strategy achieved over 60% Top5 Accuracy on ImageNet. Like previous speakers, Christian reiterated that training GANs is a challenging and painful process and should be avoided if possible. He noted that diffusion models are a superior alternative in this regard. Nevertheless, he acknowledged that experimenting with GANs can be fascinating. In one experiment, they manipulated a large GAN to disentangle the elements responsible for the background and foreground of an image. They also identified the direction responsible for the brightness of images. Interestingly, this process allowed them to create a segmenter that effectively segments the foreground of an image without requiring any model training! He concluded by observing that better GANs could lead to better segmentors by using this method. ML Challenges in Oncology and Multi-omics data - Mireira Crispin Mireira Crispin, an Assistant Professor at the University of Cambridge and Chief Digital Officer at 52North, delivered an enlightening talk on the challenges faced in applying Machine Learning to Oncology and Multi-omics data.\nMireira provided an insightful introduction to medical issues such as cancer. She outlined a critical issue faced during cancer treatment: when cancer cells are treated sub-optimally, many weaker cells are killed, reducing the size of the tumor. However, the stronger cells that survive multiply, worsening the situation. In 2023, she highlighted that many hospitals, including those in Oxford, digitize all data before analysis. Annotating cells for segmentation is a straightforward task, with 1-2k images usually being sufficient. On the other hand, annotating tissues is a far more complex task that requires considerable expertise. Even then, it might not always be clear how to annotate an image. An important challenge in handling medical data is how to merge different scales of images, such as combining CT scans and biopsies. She noted the enormous potential in transfer learning, such as training a model on one type of tissue (for which there is an abundance of images and labels) and then fine-tuning it on rarer tissues. A point of concern was that very few papers mention the iteration of multiple types of data (i.e., multimodality). Typically, researchers share their code but not their data, making the reproduction of results challenging. Usually, only a fraction of the dataset is made public. As different research labs use different datasets, there is hardly any overlap between publications, posing another challenge in the field. What is Multimodality and How To Work With It? - Louis-Philippe (LP) Morency Louis-Philippe Morency, a tenure-track Faculty member at CMU Language Technology Institute, leads the Multimodal Communication and Machine Learning Laboratory (MultiComp Lab). He presented a riveting talk on the concept of multimodality and ways to work with it. You can watch this recording for a comprehensive understanding of multimodality from LP.\nLP began by defining multimodality. It refers to the idea that when we communicate, some information is embedded in our words, some in our tone, and some in our gestures. He then discussed various ways modalities can intersect. In many cases, information between modalities (e.g., image and its corresponding description) overlap. For instance, if we have an image of a girl standing in front of a house with the caption “Alice in front of her friend’s house,” there’s a significant overlap between the image and the text (the presence of a girl and a house). However, details like the girl’s ethnicity, the house’s color, and the weather are solely present in the image, while the girl’s name and the owner of the house are solely present in the text. Interestingly, in certain cases, combining two modalities can introduce new information into the system. This phenomenon, known as emergence, is considered the holy grail of multimodal learning. LP went on to discuss different ways of merging embeddings from different modalities. The timing of the merging process has its own pros and cons. For instance, it’s beneficial to extract as much information as possible from a single modality, but it’s also important to ensure that different modalities can interact with each other. If modalities are merged very late, it’s impossible to achieve emergence. Apart from merging at different stages of neural networks, there are several ways to combine two embeddings. These include concatenation, addition, multiplication, and more complex operations such as gating. Some ‘attention-like’ operations can also be performed. Another challenge in multimodal learning is ensuring that two embeddings accurately represent the same content. At times, one modality might dominate the others. To address this issue, LP suggested the use of residual training, which involves first training a model with one modality, then with the second modality but only fitting to the unexplained part by modality one, and finally with a combination of the two. While the proper way to do this is still an open question, the idea itself holds promise. He also pointed out that methods like CLIP ignore unique information present in either the text or the image. It is trained to extract only the mutual information… Lastly, LP emphasized that statistical methods will play a crucial role in medical applications in the future. ",
  "wordCount" : "1217",
  "inLanguage": "en",
  "datePublished": "2023-07-22T23:00:00+01:00",
  "dateModified": "2023-07-22T23:00:00+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/posts/oxml-report-day2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pasza's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Pasza&#39;s blog (Alt + H)">Pasza&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/about" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="/useful-materials" title="Useful materials">
                    <span>Useful materials</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      OxML Report Day2 📜
    </h1>
    <div class="post-meta"><span title='2023-07-22 23:00:00 +0100 +0100'>July 22, 2023</span>

</div>
  </header> 
  <div class="post-content"><p>The report of all talks during the second day of OxML Health 2023 where I&rsquo;ve been on behalf of <a href="https://appsilon.com/">Appsilon</a>..</p>
<p>This day talks were on:</p>
<ol>
<li>The State of Computer Vision and Many CV Experiments - <a href="https://chrirupp.github.io/">Cristian Rupprecht</a></li>
<li>ML Challenges in Oncology and Multi-omics data - <a href="https://www.oncology.cam.ac.uk/research/our-research/crispin">Mireira Crispin</a></li>
<li>What is a Multimodality and How To Work With It? - <a href="https://www.cs.cmu.edu/~morency/">Louis-Philippe (LP) Morency</a></li>
</ol>
<p>I understand it might be out-of-context for people not attending OxML.
If you&rsquo;re interested in something in particular, reach out to me on <a href="https://www.linkedin.com/in/piotr-pasza-storo%C5%BCenko/">LinkedIn</a>.</p>
<h2 id="the-state-of-computer-vision-and-many-cv-experiments---christian-rupprecht">The State of Computer Vision and Many CV Experiments - Christian Rupprecht<a hidden class="anchor" aria-hidden="true" href="#the-state-of-computer-vision-and-many-cv-experiments---christian-rupprecht">#</a></h2>
<p>Christian Rupprecht, a Departmental Lecturer in Computer Vision at VGG in Oxford, shared an informative talk on the history and current state of computer vision, and shared numerous experimental observations.</p>
<ol>
<li>He started with a concise overview of the history of computer vision. I didn&rsquo;t know that the Rosenblatt perceptron has been <a href="https://en.wikipedia.org/wiki/Perceptron">implemented with physical hardware</a> of that size.</li>
<li>He showcased that the idea of image decomposition into components like reflectance, specularity, shape, and object motion dates back to 1978, highlighting that it&rsquo;s not a new concept.</li>
<li>An interesting anecdote shared was how the iconic slow-motion scenes in the Matrix movie were created using a <a href="https://www.youtube.com/watch?v=bKEcElcTUMk">series of cameras capturing video sequentially</a>.</li>
<li>Christian engaged in an in-depth discussion on training signals for unsupervised, semi-supervised, and weakly-supervised learning.
<ul>
<li>He explained that a signal is something one can optimize for, with one straightforward example being the reconstruction of the input.</li>
<li>He also detailed another approach that involves having two inputs that are opposite with respect to each other. The aim is to train the model to make representations similar for similar inputs and distinct for different ones.</li>
<li>He emphasized that one could work on both the latent representation and the reconstruction, applying losses at different stages.</li>
</ul>
</li>
<li>The lecture provided a comprehensive insight into unsupervised learning, which when considered along with Ali&rsquo;s lecture from the previous day, offers a deeper understanding.</li>
<li>Christian emphasized a theme where a model is initially trained in an unsupervised manner, then fine-tuned for the specific task.</li>
<li>He presented a captivating approach involving ImageNet where they
<ol>
<li>Identified similar images in an unsupervised manner.</li>
<li>Labeled images according to the clustering from the first step and ran regular classification training.</li>
<li>Repeated the clustering process.</li>
<li>This strategy achieved over 60% Top5 Accuracy on ImageNet.</li>
</ol>
</li>
<li>Like previous speakers, Christian reiterated that training GANs is a challenging and painful process and should be avoided if possible. He noted that diffusion models are a superior alternative in this regard.</li>
<li>Nevertheless, he acknowledged that experimenting with GANs can be fascinating.
<ul>
<li>In one experiment, they manipulated a large GAN to disentangle the elements responsible for the background and foreground of an image.</li>
<li>They also identified the direction responsible for the brightness of images.</li>
<li>Interestingly, this process allowed them to create a segmenter that effectively segments the foreground of an image without requiring any model training!</li>
<li>He concluded by observing that better GANs could lead to better segmentors by using this method.</li>
</ul>
</li>
</ol>
<h2 id="ml-challenges-in-oncology-and-multi-omics-data---mireira-crispin">ML Challenges in Oncology and Multi-omics data - Mireira Crispin<a hidden class="anchor" aria-hidden="true" href="#ml-challenges-in-oncology-and-multi-omics-data---mireira-crispin">#</a></h2>
<p>Mireira Crispin, an Assistant Professor at the University of Cambridge and Chief Digital Officer at <a href="https://52north.health/">52North</a>, delivered an enlightening talk on the challenges faced in applying Machine Learning to Oncology and Multi-omics data.</p>
<ol>
<li>Mireira provided an insightful introduction to medical issues such as cancer.</li>
<li>She outlined a critical issue faced during cancer treatment: when cancer cells are treated sub-optimally, many weaker cells are killed, reducing the size of the tumor. However, the stronger cells that survive multiply, worsening the situation.</li>
<li>In 2023, she highlighted that many hospitals, including those in Oxford, digitize all data before analysis.</li>
<li>Annotating cells for segmentation is a straightforward task, with 1-2k images usually being sufficient.</li>
<li>On the other hand, annotating tissues is a far more complex task that requires considerable expertise. Even then, it might not always be clear how to annotate an image.</li>
<li>An important challenge in handling medical data is how to merge different scales of images, such as combining CT scans and biopsies.</li>
<li>She noted the enormous potential in transfer learning, such as training a model on one type of tissue (for which there is an abundance of images and labels) and then fine-tuning it on rarer tissues.</li>
<li>A point of concern was that very few papers mention the iteration of multiple types of data (i.e., multimodality).</li>
<li>Typically, researchers share their code but not their data, making the reproduction of results challenging. Usually, only a fraction of the dataset is made public.</li>
<li>As different research labs use different datasets, there is hardly any overlap between publications, posing another challenge in the field.</li>
</ol>
<h2 id="what-is-multimodality-and-how-to-work-with-it---louis-philippe-lp-morency">What is Multimodality and How To Work With It? - Louis-Philippe (LP) Morency<a hidden class="anchor" aria-hidden="true" href="#what-is-multimodality-and-how-to-work-with-it---louis-philippe-lp-morency">#</a></h2>
<p>Louis-Philippe Morency, a tenure-track Faculty member at CMU Language Technology Institute, leads the Multimodal Communication and Machine Learning Laboratory (<a href="http://multicomp.cs.cmu.edu/">MultiComp Lab</a>). He presented a riveting talk on the concept of multimodality and ways to work with it. You can watch <a href="https://www.youtube.com/watch?v=VIq5r7mCAyw">this recording</a> for a comprehensive understanding of multimodality from LP.</p>
<ol>
<li>LP began by defining multimodality. It refers to the idea that when we communicate, some information is embedded in our words, some in our tone, and some in our gestures.</li>
<li>He then discussed various ways modalities can intersect. In many cases, information between modalities (e.g., image and its corresponding description) overlap. For instance, if we have an image of a girl standing in front of a house with the caption &ldquo;Alice in front of her friend&rsquo;s house,&rdquo; there&rsquo;s a significant overlap between the image and the text (the presence of a girl and a house). However, details like the girl&rsquo;s ethnicity, the house&rsquo;s color, and the weather are solely present in the image, while the girl&rsquo;s name and the owner of the house are solely present in the text.</li>
<li>Interestingly, in certain cases, combining two modalities can <strong>introduce new information into the system</strong>. This phenomenon, known as <strong>emergence</strong>, is considered the holy grail of multimodal learning.</li>
<li>LP went on to discuss different ways of merging embeddings from different modalities. The timing of the merging process has its own pros and cons. For instance, it&rsquo;s beneficial to extract as much information as possible from a single modality, but it&rsquo;s also important to ensure that different modalities can interact with each other. If modalities are merged very late, it&rsquo;s impossible to achieve emergence.</li>
<li>Apart from merging at different stages of neural networks, there are several ways to combine two embeddings. These include concatenation, addition, multiplication, and more complex operations such as gating. Some &lsquo;attention-like&rsquo; operations can also be performed.</li>
<li>Another challenge in multimodal learning is ensuring that two embeddings accurately represent the same content.</li>
<li>At times, one modality might dominate the others. To address this issue, LP suggested the use of residual training, which involves first training a model with one modality, then with the second modality but only fitting to the <em>unexplained</em> part by modality one, and finally with a combination of the two. While the proper way to do this is still an open question, the idea itself holds promise.</li>
<li>He also pointed out that methods like CLIP ignore unique information present in either the text or the image. It is trained to extract only the mutual information&hellip;</li>
<li>Lastly, LP emphasized that statistical methods will play a crucial role in medical applications in the future.</li>
</ol>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/conference/">Conference</a></li>
      <li><a href="/tags/oxml/">OxML</a></li>
      <li><a href="/tags/oxford/">Oxford</a></li>
      <li><a href="/tags/machine-learning/">Machine-Learning</a></li>
      <li><a href="/tags/appsilon/">Appsilon</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>Piotr Pasza Storożenko</span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
