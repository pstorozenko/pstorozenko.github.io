<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Introduction Into Mathematical Optimization Way of Thinking ðŸ§® | Pasza&#39;s blog</title>
<meta name="keywords" content="math, optimization, julia">
<meta name="description" content="In the post about fitting pizzas inside another pizza I&rsquo;ve shown the following picture and promised a post about recreating it.

     
            pizzas in pizzaPizzas packed in pizza
        


However, I would not like to assume that everyone is familiar with the optimization theory (you may graduate from Computer Science and still not know a lot) so I want to present an introduction here as high school math and quadratic equations are enough to understand those concepts.">
<meta name="author" content="">
<link rel="canonical" href="/posts/mathematical-optimization/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="/posts/mathematical-optimization/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

>
<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PR8Z9SJC7F"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-PR8Z9SJC7F');
        }
      </script><meta property="og:url" content="/posts/mathematical-optimization/">
  <meta property="og:site_name" content="Pasza&#39;s blog">
  <meta property="og:title" content="Introduction Into Mathematical Optimization Way of Thinking ðŸ§®">
  <meta property="og:description" content="In the post about fitting pizzas inside another pizza Iâ€™ve shown the following picture and promised a post about recreating it.
pizzas in pizzaPizzas packed in pizza
However, I would not like to assume that everyone is familiar with the optimization theory (you may graduate from Computer Science and still not know a lot) so I want to present an introduction here as high school math and quadratic equations are enough to understand those concepts.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-11-07T19:40:13+01:00">
    <meta property="article:modified_time" content="2021-11-07T19:40:13+01:00">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Optimization">
    <meta property="article:tag" content="Julia">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Introduction Into Mathematical Optimization Way of Thinking ðŸ§®">
<meta name="twitter:description" content="In the post about fitting pizzas inside another pizza I&rsquo;ve shown the following picture and promised a post about recreating it.

     
            pizzas in pizzaPizzas packed in pizza
        


However, I would not like to assume that everyone is familiar with the optimization theory (you may graduate from Computer Science and still not know a lot) so I want to present an introduction here as high school math and quadratic equations are enough to understand those concepts.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/posts/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Introduction Into Mathematical Optimization Way of Thinking ðŸ§®",
      "item": "/posts/mathematical-optimization/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Introduction Into Mathematical Optimization Way of Thinking ðŸ§®",
  "name": "Introduction Into Mathematical Optimization Way of Thinking ðŸ§®",
  "description": "In the post about fitting pizzas inside another pizza I\u0026rsquo;ve shown the following picture and promised a post about recreating it.\npizzas in pizzaPizzas packed in pizza\nHowever, I would not like to assume that everyone is familiar with the optimization theory (you may graduate from Computer Science and still not know a lot) so I want to present an introduction here as high school math and quadratic equations are enough to understand those concepts.\n",
  "keywords": [
    "math", "optimization", "julia"
  ],
  "articleBody": "In the post about fitting pizzas inside another pizza Iâ€™ve shown the following picture and promised a post about recreating it.\npizzas in pizzaPizzas packed in pizza\nHowever, I would not like to assume that everyone is familiar with the optimization theory (you may graduate from Computer Science and still not know a lot) so I want to present an introduction here as high school math and quadratic equations are enough to understand those concepts.\nMathematical optimization for dummies Mathematical optimization is usually just asking a question about finding values of some variables that minimize or maximize value of some function. We call this function the objective. For example:\n$$ \\min _x x^2 - 4x + 2. $$\nWith usage of high-school formula we can write:\n$$ \\min _x x^2 - 4x + 2 = \\min _x \\ (x - 2)^2, $$\nand find $x_{\\text{min}} = 2$.\nConstrains in mathematical optimization Often our optimization problem is constrained somehow. In the language of mathematical optimization we say that some variable is subjected to. We can introduce two types of constrains:\nInequality constraint e.g. $x \\le 4$ Equality constraint e.g. $y = x - 5$ For example:\n$$ \\begin{aligned} \\min\\quad \u0026 x^2 + 5 \\newline \\text{Subject to} \\quad \u0026 4 \\le x \\le 10 \\newline \\end{aligned} $$\nand here solution is $x_{min} = 4$ and objective function is $4^2 + 5 = 21$. Note that the interval is closed. It is super rare for optimization problems to have open boundaries. Try to think what it would mean.\nLetâ€™s consider:\n$$ \\begin{aligned} \\max\\quad \u0026 4y \\newline \\text{Subject to} \\quad \u0026 x \\le 3 \\newline \u0026 x = 2y + 2 \\newline \\end{aligned} $$\nIt may not be as obvious at first but $x_{max} = 3$, $y_{max} = 0.5$ with objective equal to $2$. What is interesting here is that we maximize over variables $x$ and $y$, while $x$ is not explicitly present in our objective function. Of course we may rewrite the problem by substituting $y$ by $x$. $$ 2y = x - 2 \\newline y = (x - 2) / 2 \\newline $$\n$$ 4y = 2(x-2) = 2x - 4 $$\n$$ \\begin{aligned} \\max\\quad \u0026 2x - 4 \\newline \\text{Subject to} \\quad \u0026 x \\le 3 \\newline \u0026 y = (x - 2) / 2 \\newline \\end{aligned} $$\nProblem written like this is much easier to solve by hand, and we eliminated one variable.\nSolving optimization problems using julia Letâ€™s try to phrase above problems using julia. We will be using JuMP package as it has a convenient interface. The code is so self-explaining that I leave it as is. At GitHub you will find a jupyter notebook with this code.\nThis is the first simple quadratic problem:\nmodel = Model(Ipopt.Optimizer) @variable(model, x) @objective(model, Min, x^2 + 5 ) @constraint(model, 4 \u003c= x \u003c= 10) optimize!(model) To get the value of variable $x$ and objective function:\njulia\u003e value(x), objective_value(model) (3.0000000297721905, 35.00000032749409) And the second problem with two variables:\nmodel = Model(Ipopt.Optimizer) @variable(model, x) @variable(model, y) @objective(model, Max, 4y) @constraint(model, x \u003c= 3) @constraint(model, x == 2y + 2) optimize!(model) julia\u003e value(x), value(y), objective_value(model) (3.000000028747048, 0.500000014373524, 2.000000057494096) The two paths in mathematical optimization What I havenâ€™t said yet is that there are two main paths in optimization field:\nWriting problems in framework presented above. Writing solvers for those problems. Those problems are surprisingly separable. You may have strong skills in formulating optimization problems and doesnâ€™t have any clue about low-level processor optimization. Similarly you may love to find all the weird SIMD optimization and be careful about memory patters and doesnâ€™t really care what are you calculating.\nWhy this post was interesting? While problems described above may not be so fascinating, they serve as good examples how to write problems in mathematical optimization framework. Stay tuned for the next mathematical optimization post in which we will solve some imaginary real-life problems using JuMP!!!\n",
  "wordCount" : "651",
  "inLanguage": "en",
  "datePublished": "2021-11-07T19:40:13+01:00",
  "dateModified": "2021-11-07T19:40:13+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/posts/mathematical-optimization/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pasza's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Pasza&#39;s blog (Alt + H)">Pasza&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/about" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="/useful-materials" title="Useful materials">
                    <span>Useful materials</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Introduction Into Mathematical Optimization Way of Thinking ðŸ§®
    </h1>
    <div class="post-meta"><span title='2021-11-07 19:40:13 +0100 +0100'>November 7, 2021</span>

</div>
  </header> 
  <div class="post-content"><p>In the post about fitting pizzas inside another pizza I&rsquo;ve shown the following picture and promised a post about recreating it.</p>
<figure>
    <img loading="lazy" src="/posts/pizza-twice-as-big/circles_in_circle.png"
         alt="Pizzas packed in pizza"/> <figcaption>
            pizzas in pizza<p>Pizzas packed in pizza</p>
        </figcaption>
</figure>

<p>However, I would not like to assume that everyone is familiar with the <a href="https://en.wikipedia.org/wiki/Mathematical_optimization">optimization theory</a> (you may graduate from Computer Science and still not know a lot) so I want to present an introduction here as high school math and quadratic equations are enough to understand those concepts.</p>
<h2 id="mathematical-optimization-for-dummies">Mathematical optimization for dummies<a hidden class="anchor" aria-hidden="true" href="#mathematical-optimization-for-dummies">#</a></h2>
<p>Mathematical optimization is usually just asking a question about finding values of some <strong>variables</strong> that <strong>minimize</strong> or <strong>maximize</strong> value of some function.
We call this function the <strong>objective</strong>.
For example:</p>
<p>$$
\min _x x^2 - 4x + 2.
$$</p>
<p>With usage of high-school formula we can write:</p>
<p>$$
\min _x x^2 - 4x + 2 = \min _x \ (x - 2)^2,
$$</p>
<p>and find $x_{\text{min}} = 2$.</p>
<h3 id="constrains-in-mathematical-optimization">Constrains in mathematical optimization<a hidden class="anchor" aria-hidden="true" href="#constrains-in-mathematical-optimization">#</a></h3>
<p>Often our optimization problem is <strong>constrained</strong> somehow.
In the language of mathematical optimization we say that some variable is <strong>subjected to</strong>.
We can introduce two types of constrains:</p>
<ol>
<li>Inequality constraint e.g. $x \le 4$</li>
<li>Equality constraint e.g. $y = x - 5$</li>
</ol>
<p>For example:</p>
<p>$$
\begin{aligned}
\min\quad &amp; x^2 + 5 \newline
\text{Subject to} \quad &amp; 4 \le x \le 10 \newline
\end{aligned}
$$</p>
<p>and here solution is $x_{min} = 4$ and objective function is $4^2 + 5 = 21$.
Note that the interval is closed.
It is super rare for optimization problems to have open boundaries.
Try to think what it would mean.</p>
<p>Let&rsquo;s consider:</p>
<p>$$
\begin{aligned}
\max\quad &amp; 4y \newline
\text{Subject to} \quad &amp;  x \le 3 \newline
&amp; x = 2y + 2 \newline
\end{aligned}
$$</p>
<p>It may not be as obvious at first but $x_{max} = 3$, $y_{max} = 0.5$ with objective equal to $2$.
What is interesting here is that we maximize over variables $x$ and $y$, while $x$ is not explicitly present in our objective function.
Of course we may rewrite the problem by substituting $y$ by $x$.
$$
2y = x - 2 \newline
y = (x - 2) / 2 \newline
$$</p>
<p>$$
4y = 2(x-2) = 2x - 4
$$</p>
<p>$$
\begin{aligned}
\max\quad &amp; 2x - 4 \newline
\text{Subject to} \quad &amp;  x \le 3 \newline
&amp; y = (x - 2) / 2 \newline
\end{aligned}
$$</p>
<p>Problem written like this is much easier to solve by hand, and we eliminated one variable.</p>
<h2 id="solving-optimization-problems-using-julia">Solving optimization problems using julia<a hidden class="anchor" aria-hidden="true" href="#solving-optimization-problems-using-julia">#</a></h2>
<p>Let&rsquo;s try to phrase above problems using <code>julia</code>.
We will be using <code>JuMP</code> package as it has a convenient interface.
The code is so self-explaining that I leave it as is.
At GitHub you will find <a href="https://github.com/pstorozenko/pstorozenko.github.io/blob/main/code/mathematical-optimization/main.ipynb">a jupyter notebook with this code</a>.</p>
<p>This is the first simple quadratic problem:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>model <span style="color:#f92672">=</span> Model(Ipopt<span style="color:#f92672">.</span>Optimizer)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@variable</span>(model, x)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@objective</span>(model, Min, x<span style="color:#f92672">^</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span> )
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@constraint</span>(model, <span style="color:#ae81ff">4</span> <span style="color:#f92672">&lt;=</span> x <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>optimize!(model)
</span></span></code></pre></div><p>To get the value of variable $x$ and objective function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> value(x), objective_value(model)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">3.0000000297721905</span>, <span style="color:#ae81ff">35.00000032749409</span>)
</span></span></code></pre></div><p>And the second problem with two variables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>model <span style="color:#f92672">=</span> Model(Ipopt<span style="color:#f92672">.</span>Optimizer)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@variable</span>(model, x)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@variable</span>(model, y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@objective</span>(model, Max, <span style="color:#ae81ff">4</span>y)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@constraint</span>(model, x <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@constraint</span>(model, x <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>y <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>optimize!(model)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span>julia<span style="color:#f92672">&gt;</span> value(x), value(y), objective_value(model)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">3.000000028747048</span>, <span style="color:#ae81ff">0.500000014373524</span>, <span style="color:#ae81ff">2.000000057494096</span>)
</span></span></code></pre></div><h2 id="the-two-paths-in-mathematical-optimization">The two paths in mathematical optimization<a hidden class="anchor" aria-hidden="true" href="#the-two-paths-in-mathematical-optimization">#</a></h2>
<p>What I haven&rsquo;t said yet is that there are two main paths in optimization field:</p>
<ol>
<li>Writing problems in framework presented above.</li>
<li>Writing solvers for those problems.</li>
</ol>
<p>Those problems are surprisingly separable.
You may have strong skills in formulating optimization problems and doesn&rsquo;t have any clue about low-level processor optimization.
Similarly you may love to find all the weird SIMD optimization and be careful about memory patters and doesn&rsquo;t really care <em>what</em> are you calculating.</p>
<h2 id="why-this-post-was-interesting">Why this post was interesting?<a hidden class="anchor" aria-hidden="true" href="#why-this-post-was-interesting">#</a></h2>
<p>While problems described above may not be so fascinating, they serve as good examples how to write problems in mathematical optimization framework.
Stay tuned for the next mathematical optimization post in which we will solve some imaginary real-life problems using <code>JuMP</code>!!!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/math/">Math</a></li>
      <li><a href="/tags/optimization/">Optimization</a></li>
      <li><a href="/tags/julia/">Julia</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>Piotr Pasza StoroÅ¼enko</span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
